#class wudang_spec open
#var jiali_count 5;

#alias {attack.prepare} {
    yun powerup;
};

#alias {attack} {
    #delay {3} {
        zong;
    };
    chan;

    #class attack.inner open;
    #delay {7.8} {
        zong;
    };
    #ticker {perf_chan} {
        chan;
    } {0.5};
    #class attack.inner close;
    
    #if {"${quest}" == "hb"} {
        #class attack.inner open;
        #class attack.inner close;
    };
    #elseif {${mj_started}  == 1} {
        #class attack.inner open;
        #ticker {perf_zhen} {
            zhen;
        } {3};
        #class attack.inner close;
        #if {${xf.type} == -1 || ${xf.type} == 1} {
            #var jiali_count max;
            wuying;
            #class attack.inner open;
            #ticker {wuying} {
                wuying;
            } {5.8};
            #class attack.inner close;
        };
        #elseif {${xf.type} == 2} {
            #var jiali_count max;
            wuying;
            #class attack.inner open;
            #ticker {wuying} {
                wuying;
            } {2.8};
            #class attack.inner close;
        };
        #elseif {${xf.type} == 3} {
            wuying;
            #class attack.inner open;
            #ticker {wuying} {
                wuying;
            } {2.8};
            #class attack.inner close;
        };
        #elseif {${xf.type} == 4} {
            #var jiali_count 100;
            wuying;
            #class attack.inner open;
            #ticker {wuying} {
                wuying;
            } {2.8};
            #class attack.inner close;
        };
    };
    #else {
        #if {${xf.type} == -1 || ${xf.type} == 1} {
            #var jiali_count max;
            wuying;
            lzj;
            #class attack.inner open;
            #ticker {wuying} {
                wuying;
            } {2.8};
            #ticker {lzj} {
                lzj;
            } {3.8};
            #class attack.inner close;
        };
        #elseif {${xf.type} == 2} {
            #var jiali_count max;
            wuying;
            #class attack.inner open;
            #ticker {wuying} {
                wuying;
            } {2.8};
            #class attack.inner close;
        };
        #elseif {${xf.type} == 3} {
            wuying;
            #class attack.inner open;
            #ticker {wuying} {
                wuying;
            } {2.8};
            #class attack.inner close;
        };
        #elseif {${xf.type} == 4} {
            #var jiali_count 100;
            wuying;
            #class attack.inner open;
            #ticker {wuying} {
                wuying;
            } {2.8};
            #class attack.inner close;
        };
    };
};

#var shortcut F1:缠 F2:无影 F3:连字诀 F4:刚柔;
#macro {\eOQ} {
    wuying;
};

#macro {\eOR} {
    lzj;
};

#macro {\eOP} {
    chan;
};

#macro {\eOS} {
    gangrou;
};

#alias {chan} {
    unwield all;
    do_wield sword;
    #2 perform taiji-jian.chan;
    wi;
};

#alias {sanhuan} {
    unwield all;
    do_wield sword;
    jiali ${jiali_count};
    perform taiji-jian.sanhuan;
    #if {${gangrou_ing} == 0} {
        jiali none;
    };
    wi;
};

#alias {zhen} {
    unwi;
    perform taiji-quan.zhen;
    wi;
};

#alias {zong} {
    perform tiyunzong.zong;
};

#alias {lzj} {
    unwi;
    do_wield sword;
    jiali 10;
    perform taiji-jian.lian;
    #if {${gangrou_ing} == 0} {
        jiali none;
    };
    wi;
};

#alias {szj} {
    unwi;
    do_wield sword;
    perform taiji-jian.sui;
    wi;
};

#alias {wuying} {
    unwield all;
    jiali ${jiali_count};
    perform claw.wuying;
    #if {${gangrou_ing} == 0} {
        jiali none;
    };
    wi;
};

#var gangrou_ing 0;
#alias {gangrou} {
    #var gangrou_ing 1;
    unwi;
    jiali ${jiali_count};
    perform taiji-quan.gangrou;
    #action {抬手就封住了你这一掌！} {
        #unaction {抬手就封住了你这一掌！};
        #delay {delay_gangrou} {
            #var gangrou_ing 0;
            jiali none;
        } {5};
    };
    #delay {delay_gangrou} {
        #unaction {抬手就封住了你这一掌！};
    };
    wi;
};

#alias {lianhuan} {
    perform spear.lianhuan;
};

#alias {goto_lingwu} {
    gt {静修阁};
};

#alias {goto_rest} {
    gt {武当客房};
};

#alias {goto_shifu} {
    gt {武当小屋};
};

#list my_weapons_to_wield create {sword; sword 2;};

#var shifu zhang;

#alias {reborn} {
    #send {jifa cuff taiji-quan};
    #send {jifa dodge tiyunzong};
    #send {jifa parry taiji-quan};
    #send {jifa sword taiji-jian};
    #send {jifa blade xuanxu-dao};
    #send {jifa claw taiji-zhao};
    #send {jifa force taiji-shengong};
    #send {jifa spear yuejia-qiangfa};
    bei cuff claw;
};

stat.register 缠 miss 只听得「铮」一声清响，剧烈碰撞之下你剑诀为敌所破，无以为继，被迫撤剑收招。;
stat.register 缠 hit 只能见招拆招，疲于应对，不觉已深陷太极剑意之中，无法出招。;

#var menzhong zhang;
#var menzhong_didian ht;

#alias {attack.end} {
    #var jiali_count 5;
};
#class wudang_spec close
